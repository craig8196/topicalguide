<div ng-switch on="status">

  <div ng-switch-when="loading">
    <tg-loading></tg-loading>
  </div>

  <div ng-switch-when="no-datasets">
    <div class="panel"><p>No datasets available. See the README file for details or speak with your system administrator.</p></div>
  </div>

  <div ng-switch-when="datasets">
    <h2 class="text-center">Datasets</h2>
    <p class="text-center">
      Select a dataset by clicking on one of the bars below.
      Details of the dataset are shown when selected.
      Select an analysis by clicking on one.
      An analysis will turn blue when selected.
    </p>
    <div class="panel-group">
      <div ng-repeat="(datasetKey, datasetValue) in datasets" class="datasets-accordion panel panel-default">
        <div class="panel-heading text-center pointer" data-toggle="collapse" data-parent=".datasets-accordion" href="#collapse-{{ datasetKey }}" ng-click="clickSelectDataset(datasetKey)">
          <h3 class="panel-title"><b><a class="nounderline black-text-blue-hover">{{ datasetValue.readableName }}</a>&nbsp;<a><tg-fav tg-fav-type="dataset"></tg-fav></a></b></h3>
        </div>
        <div id="collapse-{{ datasetKey }}" class="panel-collapse collapse" ng-class="{in: selections.isDatasetSelected(datasetKey)}">
          <div class="panel-body">
            <div class="container-fluid">
              <div class="col-xs-4">
                <div ng-hide="{{ !isMapEmpty(datasetValue.analyses) }}">
                  <p>No analyses available for this dataset. Import one by following directions in the README or speaking with your system administrator.</p>
                </div>
                <div ng-show="{{ !isMapEmpty(datasetValue.analyses) }}">
                  <h4>Analyses</h4>
                  <ul class="nav nav-pills nav-stacked">
                    <li ng-repeat="(analysisKey, analysisValue) in datasetValue.analyses" class="pointer" ng-class="{active: selections.isAnalysisSelected(datasetKey, analysisKey)}">
                      <span class="span-pill" ng-click="clickSelectAnalysis(analysisKey)">
                        <table class="width-100">
                          <tr>
                            <td class="text-left">
                              <tg-fav tg-fav-type="analysis"></tg-fav>&nbsp;<span class="pointer">{{ analysisValue.readableName }}</span>
                            </td>
                            <td class="text-right">
                              <a href="#/topic/all-topics" class="explore-link">Explore!</a>
                            </td>
                          </tr>
                        </table>
                      </span>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="col-xs-8">
                <h4>Description</h4>
                <div ng-hide="datasetValue.description">
                  No description provided.
                </div>
                <div ng-show="datasetValue.description">
                  <p>This dataset consists of State of the Union messages delivered by the U.S. President to Congress as mandated by the Constitution for the years 1790-2010.</p>
                </div>

                <div>
                  <tg-key-value-table tg-map="datasetValue.metadata" tg-key-header="Dataset Metadatum" tg-value-header="Value"></tg-key-value-table>
                </div>
                <div>
                  <tg-key-value-table tg-map="datasetValue.metrics" tg-key-header="Dataset Metric" tg-value-header="Value"></tg-key-value-table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div ng-switch-default>
    <tg-error></tg-error>
  </div>

</div>
