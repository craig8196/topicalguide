<div ng-switch on="status">

  <div ng-switch-when="loading">
    <tg-loading></tg-loading>
  </div>

  <div ng-switch-when="no-datasets">
    <div class="panel"><p>No datasets available. See the README file for details or speak with your system administrator.</p></div>
  </div>

  <div ng-switch-when="datasets">
    <h3 class="text-center">Datasets</h3>
    <p class="text-center">
      Select a dataset by clicking on one of the bars below.
      Details of the dataset are shown when selected.
      Select an analysis by clicking on one.
      An analysis will turn blue when selected.
    </p>
    <div class="panel-group">
      <div ng-repeat="(datasetKey, datasetValue) in datasets" class="datasets-accordion panel panel-default">
        <div class="panel-heading text-center pointer" data-toggle="collapse" data-parent=".datasets-accordion" href="#collapse-{{ datasetKey }}">
          <h3 class="panel-title"><b><a class="nounderline black-text-blue-hover">{{ datasetValue.readableName }}</a>&nbsp;<a><tg-fav tg-fav-type="dataset"></tg-fav></a></b></h3>
        </div>
        <div id="collapse-{{ datasetKey }}" class="panel-collapse collapse in">
          <div class="panel-body">
            <div class="container-fluid">
              <div class="col-xs-4">
                <div ng-hide="datasetValue.analyses">
                  <p>No analyses available for this dataset. Import one by following directions in the README.</p>
                </div>
                <div ng-show="datasetValue.analyses">
                  <h4>Analyses</h4>
                  <ul class="nav nav-pills nav-stacked">
                    <li ng-repeat="(analysisKey, analysisValue) in datasetValue.analyses" class="pointer" ng-class="{active: isAnalysisSelected(analysisKey)}">
                      <a ng-click="selectAnalysis(analysisKey)">
                        <span><tg-fav tg-fav-type="analysis"></tg-fav></span>&nbsp;<span class="pointer">{{ analysisValue.readableName }}</span>
                        <button type="button" class="btn btn-success" style="float: right; padding: 1px 4px;" ng-click="clickExploreAnalysis(analysisKey)">Explore!</button>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="col-xs-8">
                <h4>Description</h4>
                <div ng-hide="datasetValue.description">
                  No description provided.
                </div>
                <div ng-show="datasetValue.description">
                  <p>This dataset consists of State of the Union messages delivered by the U.S. President to Congress as mandated by the Constitution for the years 1790-2010.</p>
                </div>

                <div>
                  <tg-key-value-table tg-map="datasetValue.metadata" tg-key-header="Metadata" tg-value-header="Value"></tg-key-value-table>
                </div>
                <div>
                  <tg-key-value-table tg-map="datasetValue.metrics" tg-key-header="Metric" tg-value-header="Value"></tg-key-value-table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div ng-switch-default>
    <tg-error></tg-error>
  </div>

</div>
